<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Quiz</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>

  <div class="container">

    <!-- start page -->
    <div id="startPage">
      <div class="jumbotron">
        <h1 class="display-4 text-center">Coding Quiz Challenge</h1>
          <p class="lead text-center">Try to answer the following code-related questions within the time limit. Keep in mind that incorrect answers will penalize your score/time by ten seconds!
        </p>
        <div class="row justify-content-center">
          <button class="btn btn-primary" id="startQuiz">Start Quiz</button>
        </div>
    </div>
      
    <!-- quiz -->
    <div id="quizPage">
      <nav class="navbar navbar-light bg-light justify-content-center">
        <a id="time" class="navbar-brand" href="#">Time: </a>
      </nav>
      <div class="jumbotron jumbotron-fluid">
        <div class="container text-center">
          <div id="question">Question</div>
          <div id class="row justify-content-center">
            <button id="choice1" class="btn btn-primary"></button>
            <button id="choice2" class="btn btn-primary"></button>
            <button id="choice3" class="btn btn-primary"></button>
            <button id="choice4" class="btn btn-primary"></button>
          </div>
          <div id="result"></div>
        </div>
      </div>
    </div>

    <!-- game over -->
    <div id="gameOverPage">
      <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <h1 class="display-4">All done!</h1>
          <p id="score">Your final score is </p>
            <form class="form-inline">
              <div class="form-group mx-sm-3 mb-2">
                <label for="initials">Initials</label>
                <input class="form-control" type="text" name="initials" id="initials">
              </div>
              <button class="btn btn-primary mb-2" id="submit">Submit</button>
            </form>
        </div>
      </div>
    </div>

    <!-- high score -->
    <div id="highscorePage">
      <table class="table text-center">
        <thead>
          <tr>
            <th scope="col">User Initials</th>
            <th scope="col">Score</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="highscoreInitial"></td>
            <td id="highscoreScore"></td>
          </tr>
        </tbody>
      </table>
      <div id="endGameBtns">
        <div class="row justify-content-center">
          <button class="btn btn-primary" id="playAgain">Play Again</button>
          <button class="btn btn-primary" id="clearHighscore">Clear Highscores</button>
        </div>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <script>

    const quizQuestions = [
      {
        questions: 'The condition in an if/else statement  is enclosed within ______.',
        choice1: 'quotes',
        choice2: 'curly brackets',
        choice3: 'parentheses',
        choice4: 'square brackets',
        correctAnswer: '3'
      },
      {
        question: 'Arrays in Javascript can be used to store ______.',
        choice1: 'numbers and strings',
        choice2: 'other arrays',
        choice3: 'booleans',
        choice4: 'all of the above',
        correctAnswer: '4'
      },
      {
        question: 'String values must be enclosed within ______ when being assigned to variables.',
        choice1: 'commas',
        choice2: 'curly brackets',
        choice3: 'quotes',
        choice4: 'parentheses',
        correctAnswer: '3'
      },
      {
        question: 'A very useful tool used during development and debugging for printing content to the debugger is:',
        choice1: 'JavaScript',
        choice2: 'terminal/bash',
        choice3: 'for loops',
        choice4: 'console.log',
        correctAnswer: '4'
      },
      {
        question: 'Commonly used data types DO NOT include:',
        choice1: 'strings',
        choice2: 'booleans',
        choice3: 'alerts',
        choice4: 'numbers',
        correctAnswer: '3'
      }
    ]

    let homePage = document.getElementById('startPage')
    let startBtn = document.getElementById('startQuiz')

    let quizPageEl = document.getElementById('quizPage')
    let timer = document.getElementById('time')
    let questionsEl = document.getElementById('question')
    let button1 = document.getElementById('choice1')
    let button2 = document.getElementById('choice2')
    let button3 = document.getElementById('choice3')
    let button4 = document.getElementById('choice4')
    let resultEl = document.getElementById('result')

    let gameOverPageEl = document.getElementById('gameOverPage')
    let finalScore = document.getElementById('score')
    let inputInitials = document.getElementById('initials')
    let submitBtn = document.getElementById('submit')

    let highscoreList = document.getElementById('highscorePage')
    let highscoreInitialList = document.getElementById('highscoreInitial')
    let highscoreScoreList = document.getElementById('highscoreScore')
    let finishQuiz = document.getElementById('endGameBtns')
    let repeatQuiz = document.getElementById('playAgain')
    let clearScore = document.getElementById('clearHighscore')

    let finalQuestionIndex = quizQuestions.length
    let currentQuestionIndex = 0
    let count = 75
    let score = 0

    // GIVEN I am taking a code quiz
    // WHEN I click the start button
    // THEN a timer starts and I am presented with a question

    const generateQuestions = () => {
      // hides the gameover page display
      gameOverPageEl.style.display = 'none'
      let currentQuestion = quizQuestions[currentQuestionIndex]
      questionsEl.innerHTML = '<p>' + currentQuestion.questions + '<p>'
      button1.innerHTML = currentQuestion.choice1
      button2.innerHTML = currentQuestion.choice2
      button3.innerHTML = currentQuestion.choice3
      button4.innerHTML = currentQuestion.choice4
    }

    const startQuiz = () => {
      // hide the gameover and home page display
      gameOverPageEl.style.display = 'none'
      homePage.style.display = 'none'
      // start the quiz questions
      generateQuestions()
      // start the timer
      const startTimer = setInterval(() => {
        count--
        timer.textContent = 'Time: ' + count
        // when timer gets to 0, clear the time and show the score
        if (count === 0) {
          clearInterval(startTimer)
          showScore()
        }  
      }, 1000)
      // show the content of the quiz page
      quizPageEl.style.display = 'block'
    }

    const showScore = () => {
      // hide the content of the quiz page
      quizPageEl.style.display = 'none'
      // show the content of the game over page
      gameOverPageEl.style.display = 'block'
      // clear timer
      clearInterval(startTimer)
      // show score
      finalScore.innerHTML = 'You got' + score + 'out of' + quizQuestions.length
      // input your initial
      inputInitials.value = ''
    }

    submitBtn.addEventListener('click', highscore() => {

    })
    
    // WHEN I answer a question
    // THEN I am presented with another question
    // WHEN I answer a question incorrectly
    // THEN time is subtracted from the clock

    // WHEN all questions are answered or the timer reaches 0
    // THEN the game is over
    // WHEN the game is over
    // THEN I can save my initials and score

    

    document.getElementById('startQuiz').addEventListener("click", startQuiz)

  </script>
</body>
</html>